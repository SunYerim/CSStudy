## OAuth

인터넷 사용자들이 비밀번호를 제공하지 않고, 다른 웹사이트 상의 자신들의 정보에 대해 웹 사이트나 애플리케이션의 접근 권한을 부여할 수 있는 개방형 표준 방법 <br>
→ **_한 서비스에서 다른 서비스로 권한 부여를 전달하기 위한 프로토콜!!_**

<br>

### 사용 용어

---

- **사용자** : 계정을 가지고 있는 개인
- **소비자** : OAuth를 사용해 서비스 제공자에게 접근하는 웹사이트 or 애플리케이션
- **서비스 제공자** : OAuth를 통해 접근을 지원하는 웹 애플리케이션
- **소비자 비밀번호** : 서비스 제공자에게 소비자가 자신임을 인증하기 위한 키
- **요청 토큰** : 소비자가 사용자에게 접근 권한을 인증받기 위해 필요한 정보가 담겨있음
- **접근 토큰** : 인증 후에 사용자가 서비스 제공자가 아닌 소비자를 통해 보호 자원에 접근하기 위한 키 값

<br>

💡 **_토큰 종류로는 Access Token과 Refresh Token이 있다!_**

<br>

### 인증 과정

---

> **소비자**(서비스 제공자에게 접근하는 웹사이트 or 애플리케이션) <-> **서비스 제공자**(OAuth를 통해 접근 지원하는 웹사이트) <br>

ⓐ 소비자가 서비스 제공자에게 요청 토큰을 요청한다. <br>
ⓑ 서비스 제공자가 소비자에게 요청 토큰을 발급해준다. <br>
ⓒ 소비자가 사용자(개인)를 서비스 제공자로 이동시킨다. 여기서 사용자 인증이 수행된다! <br>
ⓓ 서비스 제공자가 사용자를 소비자로 이동시킨다 <br>
ⓔ 소비자가 접근 토큰을 요청한다 <br>
ⓕ 서비스 제공자가 접근 토큰을 발급한다 <br>
ⓖ 발급된 접근 토큰을 이용해서 소비자에서 사용자 정보에 접근한다

<br>

## OAuth 2.0이란?

OAuth의 최신 버전, 인증을 위한 개방형 표준 프로토콜이다 <br>
구글, 페이스북, 카카오, 네이버 등에서 제공하는 간편 로그인 기능도 OAuth2 프로토콜 기반의 사용자 인증 기능을 제공하고 있다.

<br>

### OAuth 2.0 주요 용어

---

- **Authentication** : 인증, 접근 자격이 있는지 검증하는 단계
- **Authorization** : 인가, 자원에 접근할 권한을 부여하는 것이다. 인가가 완료되면 리소스 접근 권한이 당긴 access token이 클라이언트에게 부여된다.
- **Access Token** : 리소스 서버에게서 리소스 소유자의 보호된 자원을 획득할 때 사용되는 만료 기간이 있는 Token이다.
- **Refresh Token** : Access Token 만료시 이를 갱신하기 위한 용도로 사용하는 Token이다. Refresh Token은 일반적으로 Access Token보다 만료 기간이 길다.

<br>

### Roles - OAuth 2.0의 4가지 역할

---

- **Resource Owner** : 리소스 소유자 또는 사용자. 보호된 자원에 접근할 수 있는 자격을 보호해 주는 주체. <u>OAuth2 프로토콜 흐름에서 클라이언트를 인증하는 역할을 수행한다.</u> 인증이 완료되면 권한 획득 자격을 클라이언트에게 부여한다.
- **Client** : 보호된 자원을 사용하려고 접근 요청을 하는 애플리케이션
- **Resource Server** : 사용자의 보호된 자원을 호스팅하는 서버
- **Authorization Server** : 권한 서버. 인증/인가를 수행하는 서버로 클라이언트의 접근 자격을 확이하고 Access Token을 발급하여 권한을 부여하는 역할을 수행한다.

<br><br>

### 면접 질문 예상

---

<details>
    <summary>JWT와 OAuth의 차이점은 무엇인가요?</summary>
    JWT는 토큰의 종류이고 OAuth는 토큰을 발급하고 인증하는 오픈 스탠다드 프로토콜입니다. <br><br>
    JWT는 클라이언트와 서버 간의 인증을 위한 토큰 기반 방식입니다. 일반적으로 웹 애플리케이션에서 사용되며 클라이언트가 서버로 인증 정보를 전달하고 서버는 해당 정보를 검증하여 사용자에 대한 인증 및 권한 부여를 수행합니다. <br><br>
    반면, OAuth는 사용자의 인증과 권한 부여를 위한 프로토콜입니다. 주로 사용자가 다른 웹 사이트나 애플리케이션에 로그인할 때 사용됩니다. <br>
    OAuth는 클라이언트 애플리케이션이 자원에 접근하기 위해 사용자의 동의를 얻고, 제한된 액세스 토큰을 발급받아 사용합니다. 보통 Bearer token을 발급합니다.
</details>

<br>

<details>
    <summary>OAuth에 대해서 간단히 설명해주세요.</summary>
    OAuth는 제3자 인증방식입니다. 기본적으로 사용자는 서버를 신뢰할 수 없습니다. 그렇기 때문에, 민감정보를 작성하는 것을 꺼립니다. 서버측에서도 마찬가지입니다. 사용자의 민감정보를 관리하는 것은 리소스가 필요합니다. <br><br>
    그래서 OAuth를 사용해서 신뢰할 수 있는 서버에게 정보를 맡겨놓고 접근할 수 있는 권한을 주는 것이라고 이해할 수 있습니다. 그러면 사용자 측에서는 민감정보를 굳이 입력하지 않고도 서비스를 사용할 수 있고, 서버측에서도 민감정보를 굳이 관리하지 않아도 되기 때문에 이점이라 볼 수 있습니다.
</details>
